# GLM_quota_kicker

> æ™ºè°± AI API é…é¢è‡ªåŠ¨å”¤é†’å·¥å…·

è‡ªåŠ¨åœ¨é…é¢é‡ç½®åè§¦å‘ API è°ƒç”¨ï¼Œæœ€å¤§åŒ–åˆ©ç”¨ä½ çš„æ™ºè°± AI API é…é¢ã€‚

## ğŸ“– ç®€ä»‹

æ™ºè°± AI çš„ API é…é¢æ¯ 5 å°æ—¶é‡ç½®ä¸€æ¬¡ï¼ˆ00:00 â†’ 05:00 â†’ 10:00 â†’ 15:00 â†’ 20:00ï¼‰ã€‚å¦‚æœé…é¢é‡ç½®åä¸ç«‹å³ä½¿ç”¨ï¼Œæ–°é…é¢ä¼šåœ¨ä¸‹ä¸€ä¸ªå‘¨æœŸåˆ°æ¥æ—¶ä½œåºŸã€‚

æœ¬å·¥å…·é€šè¿‡å®šæ—¶ä»»åŠ¡è‡ªåŠ¨åœ¨é…é¢é‡ç½®åå‘é€ç®€çŸ­è¯·æ±‚ï¼Œç¡®ä¿æ¯ä¸€ä»½é…é¢éƒ½è¢«å……åˆ†åˆ©ç”¨ã€‚

### âœ¨ ç‰¹æ€§

- ğŸš€ **è‡ªåŠ¨åŒ–è°ƒåº¦** - é…ç½®ä¸€æ¬¡ï¼Œè‡ªåŠ¨åœ¨é…é¢é‡ç½®åå”¤é†’
- â° **å†…ç½®å®šæ—¶å™¨** - æ”¯æŒæŒ‡å®šæ—¶é—´æ‰§è¡Œï¼Œæ— éœ€ç³»ç»Ÿè°ƒåº¦
- ğŸ¯ **æ™ºèƒ½é‡è¯•** - é‡åˆ°é…é¢ä¸è¶³æ—¶è‡ªåŠ¨è§£æé‡ç½®æ—¶é—´å¹¶å®‰æ’é‡è¯•
- ğŸ² **éšæœºæ¶ˆæ¯** - æ”¯æŒè‡ªå®šä¹‰æ¶ˆæ¯åˆ—è¡¨ï¼Œéšæœºé€‰æ‹©é¿å…è¢«è¯†åˆ«ä¸ºå¼‚å¸¸
- ğŸ“ **è¯¦ç»†æ—¥å¿—** - å®Œæ•´çš„è¿è¡Œæ—¥å¿—è®°å½•
- ğŸ”§ **ç®€å•é…ç½®** - äº¤äº’å¼é…ç½®å‘å¯¼ï¼Œä¸€é”®å®Œæˆè®¾ç½®
- ğŸ–¥ï¸ **è·¨å¹³å°** - æ”¯æŒ macOS å’Œ Linux

## ğŸ“‹ ç³»ç»Ÿè¦æ±‚

- **æ“ä½œç³»ç»Ÿ**: macOS æˆ– Linux
- **ä¾èµ–å·¥å…·**:
  - `bash` 4.0+
  - `jq` (JSON è§£æå·¥å…·)
  - `curl` (HTTP å®¢æˆ·ç«¯)

### å®‰è£…ä¾èµ–

```bash
# macOS
brew install jq

# Ubuntu/Debian
sudo apt install jq

# CentOS/RHEL
sudo yum install jq
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. è·å–é¡¹ç›®

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/ssdiwu/GLM_quota_kicker.git
cd GLM_quota_kicker

# æˆ–ä¸‹è½½åè§£å‹
cd glm_quota_kicker
```

### 2. é…ç½®

è¿è¡Œé…ç½®å‘å¯¼ï¼š

```bash
./wake.sh -s                # æˆ– --setup
```

é…ç½®å‘å¯¼ä¼šå¼•å¯¼ä½ å®Œæˆä»¥ä¸‹æ­¥éª¤ï¼š

1. è¾“å…¥ä½ çš„æ™ºè°± AI API Keyï¼ˆä» [å¼€æ”¾å¹³å°](https://open.bigmodel.cn/usercenter/apikeys) è·å–ï¼‰
2. é€‰æ‹©æ¨¡å‹ï¼ˆé»˜è®¤ `glm-4.7`ï¼‰
3. è®¾ç½®å”¤é†’æ—¶é—´ï¼ˆé»˜è®¤æ¯ 5 å°æ—¶ä¸€æ¬¡ï¼‰
   - æ”¯æŒæ ¼å¼ï¼š`06:00`ã€`0600`ã€`06:00:30`ã€`060030`
   - å°æ—¶å¿…é¡»æ˜¯ä¸¤ä½æ•°ï¼ˆå¦‚ `06:00`ï¼‰

### 3. æµ‹è¯•

éªŒè¯é…ç½®æ˜¯å¦æ­£ç¡®ï¼š

```bash
./wake.sh -t                # æˆ– --test
```

æˆåŠŸè¾“å‡ºï¼š

```
âœ“ æµ‹è¯•æˆåŠŸï¼é…ç½®æ­£å¸¸å·¥ä½œ
âœ“ å”¤é†’æˆåŠŸ - æ™ºè°± AI (glm-4.7)
```

### ğŸ“Œ MacBook ç”¨æˆ·å¿…è¯»

> **âš ï¸ é‡è¦æç¤º**ï¼šMacBook åˆä¸Šç›–å­åä¼šè¿›å…¥ç¡çœ çŠ¶æ€ï¼Œå®šæ—¶ä»»åŠ¡æ— æ³•æ‰§è¡Œï¼
>
> **è§£å†³æ–¹æ¡ˆ**ï¼šæ™šä¸Šç¡è§‰å‰æ‰§è¡Œ `./wake.sh -a` å¯åŠ¨é˜²ç¡çœ åŠŸèƒ½ã€‚
>
> è¯¦è§ä¸‹æ–¹[é˜²ç¡çœ åŠŸèƒ½è¯´æ˜](#-é˜²æ­¢ç³»ç»Ÿç¡çœ é‡è¦)ã€‚

### 4. å¯åŠ¨é˜²ç¡çœ ï¼ˆMacBook ç”¨æˆ·å¿…éœ€ï¼‰

å¦‚æœä½ ä½¿ç”¨ MacBookï¼Œéœ€è¦åœ¨æ™šä¸Šç¡è§‰å‰å¯åŠ¨é˜²ç¡çœ ï¼š

```bash
./wake.sh --awake start
```

ç¬¬äºŒå¤©æ—©ä¸Šå¯ä»¥åœæ­¢é˜²ç¡çœ ä»¥èŠ‚çœç”µé‡ï¼š

```bash
./wake.sh --awake stop
```

### 5. æ‰‹åŠ¨å”¤é†’

ç›´æ¥æ‰§è¡Œè„šæœ¬å³å¯æ‰‹åŠ¨å”¤é†’ï¼š

```bash
./wake.sh
```

## ğŸ—ï¸ é¡¹ç›®æ¶æ„ï¼ˆæ¨¡å—åŒ–è®¾è®¡ï¼‰

æœ¬é¡¹ç›®é‡‡ç”¨å®Œå…¨æ¨¡å—åŒ–è®¾è®¡ï¼Œå°†åŠŸèƒ½æ‹†åˆ†ä¸ºç‹¬ç«‹çš„å¯æ‰§è¡Œå‘½ä»¤å’Œå¯å¤ç”¨çš„åº“æ¨¡å—ã€‚

### æ¶æ„æ¦‚è§ˆ

```
glm_quota_kicker/
â”œâ”€â”€ bin/                        # å¯æ‰§è¡Œå‘½ä»¤ç›®å½•
â”‚   â”œâ”€â”€ wake                    # ä¸»å‘½ä»¤å…¥å£
â”‚   â”œâ”€â”€ check-quota             # é…é¢æ£€æŸ¥å‘½ä»¤
â”‚   â”œâ”€â”€ send-request            # å‘é€è¯·æ±‚å‘½ä»¤
â”‚   â””â”€â”€ schedule-task           # è°ƒåº¦ä»»åŠ¡ç®¡ç†å‘½ä»¤
â”œâ”€â”€ lib/                        # å…±äº«åº“æ¨¡å—ç›®å½•
â”‚   â”œâ”€â”€ config.sh               # é…ç½®ç®¡ç†æ¨¡å—
â”‚   â”œâ”€â”€ logger.sh               # æ—¥å¿—æ¨¡å—
â”‚   â”œâ”€â”€ deps.sh                 # ä¾èµ–æ£€æŸ¥æ¨¡å—
â”‚   â”œâ”€â”€ utils.sh                # å·¥å…·å‡½æ•°æ¨¡å—
â”‚   â”œâ”€â”€ api.sh                  # API è¯·æ±‚æ¨¡å—
â”‚   â”œâ”€â”€ scheduler.sh            # è°ƒåº¦ç®¡ç†æ¨¡å—
â”‚   â”œâ”€â”€ timer.sh                # å®šæ—¶å™¨æ¨¡å—
â”‚   â””â”€â”€ awake.sh                # é˜²ç¡çœ æ¨¡å—
â”œâ”€â”€ config.jsonc.example        # é…ç½®æ–‡ä»¶ç¤ºä¾‹
â”œâ”€â”€ config.jsonc                # å®é™…é…ç½®æ–‡ä»¶
â”œâ”€â”€ wake.log                    # è¿è¡Œæ—¥å¿—
â””â”€â”€ README.md                   # æœ¬æ–‡æ¡£
```

### æ¨¡å—è¯´æ˜

#### ğŸ“¦ åº“æ¨¡å— (lib/)

| æ¨¡å— | åŠŸèƒ½ | ä¸»è¦å‡½æ•° |
|------|------|----------|
| **config.sh** | é…ç½®æ–‡ä»¶ç®¡ç† | `config_load`, `config_validate`, `config_get` |
| **logger.sh** | æ—¥å¿—è®°å½•å’Œç»ˆç«¯è¾“å‡º | `log_info`, `log_error`, `log_success` |
| **deps.sh** | ä¾èµ–æ£€æŸ¥å’Œç³»ç»Ÿæ£€æµ‹ | `dep_check_required`, `dep_detect_os` |
| **utils.sh** | é€šç”¨å·¥å…·å‡½æ•° | `utils_format_seconds`, `utils_calculate_wait_seconds` |
| **api.sh** | API è¯·æ±‚å¤„ç† | `api_send_request`, `api_check_quota` |
| **scheduler.sh** | ç³»ç»Ÿè°ƒåº¦ç®¡ç† | `scheduler_create`, `scheduler_remove` |
| **timer.sh** | å®šæ—¶å™¨åŠŸèƒ½ | `timer_run_foreground`, `timer_run_background` |
| **awake.sh** | é˜²ç¡çœ åŠŸèƒ½ï¼ˆmacOSï¼‰ | `awake_start`, `awake_stop`, `awake_status` |

#### ğŸ¯ å¯æ‰§è¡Œå‘½ä»¤ (bin/)

| å‘½ä»¤ | åŠŸèƒ½ | ç”¨æ³•ç¤ºä¾‹ |
|------|------|----------|
| **wake** | ä¸»å‘½ä»¤å…¥å£ | `./bin/wake -t` |
| **check-quota** | æ£€æŸ¥é…é¢çŠ¶æ€ | `./bin/check-quota -v` |
| **send-request** | å‘é€å”¤é†’è¯·æ±‚ | `./bin/send-request -m "ä½ å¥½"` |
| **schedule-task** | ç®¡ç†è°ƒåº¦ä»»åŠ¡ | `./bin/schedule-task create 06:00` |

### æ¨¡å—é—´ä¾èµ–å…³ç³»

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      å‘½ä»¤å±‚ (bin/)                      â”‚
â”‚  wake | check-quota | send-request | schedule-task    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      åº“å±‚ (lib/)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ config   â”‚  â”‚ logger   â”‚  â”‚   deps   â”‚  â”‚ utils  â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚         â”‚             â”‚             â”‚             â”‚    â”‚
â”‚         â–¼             â–¼             â–¼             â–¼    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚   api    â”‚  â”‚scheduler â”‚  â”‚  timer   â”‚  â”‚ awake  â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ¨¡å—åŒ–ä¼˜åŠ¿

| ä¼˜åŠ¿ | è¯´æ˜ |
|------|------|
| ğŸ”§ **æ˜“ç»´æŠ¤** | æ¯ä¸ªæ¨¡å—èŒè´£å•ä¸€ï¼Œä¿®æ”¹ä¸å½±å“å…¶ä»–éƒ¨åˆ† |
| ğŸ”„ **å¯é‡ç”¨** | åº“æ¨¡å—å¯è¢«å¤šä¸ªå‘½ä»¤è°ƒç”¨ï¼Œé¿å…ä»£ç é‡å¤ |
| ğŸ§ª **å¯æµ‹è¯•** | æ¨¡å—ç‹¬ç«‹ï¼Œä¾¿äºå•ç‹¬æµ‹è¯•å’Œè°ƒè¯• |
| ğŸš€ **å¯æ‰©å±•** | æ·»åŠ æ–°åŠŸèƒ½åªéœ€æ–°å¢æ¨¡å—æˆ–å‘½ä»¤ |
| ğŸ“¦ **ä½è€¦åˆ** | æ¨¡å—é—´ä¾èµ–æ¸…æ™°ï¼Œé™ä½å¤æ‚åº¦ |

### ä½¿ç”¨å‘½ä»¤

#### ä½¿ç”¨ä¸»å‘½ä»¤ï¼ˆæ¨èï¼‰

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd glm_quota_kicker

# ä½¿ç”¨ä¸»å‘½ä»¤ï¼ˆå…¼å®¹æ‰€æœ‰æ—§åŠŸèƒ½ï¼‰
./bin/wake -t                # æµ‹è¯•é…ç½®
./bin/wake -a -d 15:14       # å¯åŠ¨é˜²ç¡çœ  + åå°å®šæ—¶
./bin/wake -s                # é‡æ–°é…ç½®
```

#### ä½¿ç”¨ç‹¬ç«‹å‘½ä»¤

```bash
# æ£€æŸ¥é…é¢çŠ¶æ€
./bin/check-quota

# æ£€æŸ¥é…é¢çŠ¶æ€ï¼ˆè¯¦ç»†æ¨¡å¼ï¼‰
./bin/check-quota -v

# å‘é€å”¤é†’è¯·æ±‚
./bin/send-request

# ä½¿ç”¨è‡ªå®šä¹‰æ¶ˆæ¯å‘é€è¯·æ±‚
./bin/send-request -m "ä½ å¥½"

# ç®¡ç†è°ƒåº¦ä»»åŠ¡
./bin/schedule-task create 06:00 11:00 16:00 21:00
./bin/schedule-task list
./bin/schedule-task remove
```

### å¼€å‘è€…æŒ‡å—

#### åˆ›å»ºæ–°çš„ç‹¬ç«‹å‘½ä»¤

1. åœ¨ `bin/` ç›®å½•åˆ›å»ºæ–°æ–‡ä»¶ï¼š
```bash
touch bin/my-command
chmod +x bin/my-command
```

2. æ·»åŠ å¿…è¦çš„åº“å¼•ç”¨ï¼š
```bash
#!/bin/bash
set -euo pipefail

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")/.." && pwd)"

# åŠ è½½éœ€è¦çš„æ¨¡å—
source "$SCRIPT_DIR/lib/logger.sh"
source "$SCRIPT_DIR/lib/config.sh"
source "$SCRIPT_DIR/lib/api.sh"

# ... ä½ çš„ä»£ç  ...
```

#### åˆ›å»ºæ–°çš„åº“æ¨¡å—

1. åœ¨ `lib/` ç›®å½•åˆ›å»ºæ–°æ–‡ä»¶ï¼š
```bash
touch lib/my-module.sh
```

2. æ·»åŠ æ¨¡å—å†…å®¹ï¼ˆåŒ…å«é˜²æ­¢é‡å¤åŠ è½½ï¼‰ï¼š
```bash
#!/bin/bash
# ============================================================================
# My Module - æ¨¡å—æè¿°
# ============================================================================

# é˜²æ­¢é‡å¤åŠ è½½
[[ -n "${_LIB_MY_MODULE_LOADED:-}" ]] && return 0
_LIB_MY_MODULE_LOADED=true

# åŠ è½½ä¾èµ–æ¨¡å—
source "$(dirname "${BASH_SOURCE[0]}")/logger.sh"

# ... ä½ çš„å‡½æ•° ...
```

3. åœ¨å…¶ä»–æ–‡ä»¶ä¸­å¼•ç”¨ï¼š
```bash
source "$SCRIPT_DIR/lib/my-module.sh"
```

### å‘åå…¼å®¹

åŸæœ‰çš„ `wake.sh` å•æ–‡ä»¶è„šæœ¬ä»ç„¶ä¿ç•™ï¼Œç¡®ä¿å‘åå…¼å®¹ï¼š

```bash
# æ—§æ–¹å¼ä»ç„¶æœ‰æ•ˆ
./wake.sh -t
./wake.sh -a -d 15:14
```

æ–°é¡¹ç›®å»ºè®®ä½¿ç”¨æ¨¡å—åŒ–å‘½ä»¤ï¼š

```bash
# æ–°æ–¹å¼ï¼ˆæ¨èï¼‰
./bin/wake -t
./bin/wake -a -d 15:14
```

## ğŸ’¤ é˜²æ­¢ç³»ç»Ÿç¡çœ ï¼ˆé‡è¦ï¼‰

### ä¸ºä»€ä¹ˆéœ€è¦é˜²ç¡çœ ï¼Ÿ

MacBook åˆä¸Šç›–å­åä¼šè¿›å…¥ç¡çœ çŠ¶æ€ï¼Œæ­¤æ—¶å®šæ—¶ä»»åŠ¡æ— æ³•æ‰§è¡Œï¼Œé…é¢å”¤é†’åŠŸèƒ½ä¼šå¤±æ•ˆã€‚

### ä½¿ç”¨ wake.sh å†…ç½®çš„é˜²ç¡çœ åŠŸèƒ½

`wake.sh` å†…ç½®äº†é˜²ç¡çœ åŠŸèƒ½ï¼Œä½¿ç”¨ `-a` æˆ– `--awake` å‚æ•°ï¼š

```bash
# å¯åŠ¨é˜²ç¡çœ ï¼ˆæ™šä¸Šç¡è§‰å‰æ‰§è¡Œï¼‰
./wake.sh -a                # ç®€å†™å½¢å¼ï¼ˆç­‰åŒäº --awake startï¼‰

# åœæ­¢é˜²ç¡çœ ï¼ˆç¬¬äºŒå¤©æ—©ä¸Šæ‰§è¡Œï¼‰
./wake.sh -a stop

# é‡å¯é˜²ç¡çœ 
./wake.sh -a restart

# æŸ¥çœ‹é˜²ç¡çœ çŠ¶æ€
./wake.sh -a status
```

### ä¸å®šæ—¶ä»»åŠ¡ç»„åˆä½¿ç”¨

é˜²ç¡çœ åŠŸèƒ½å¯ä»¥ä¸å®šæ—¶ä»»åŠ¡ç»„åˆä½¿ç”¨ï¼Œä¸€æ¬¡æ€§å®Œæˆè®¾ç½®ï¼š

```bash
# å¯åŠ¨é˜²ç¡çœ  + åå°å®šæ—¶ä»»åŠ¡
./wake.sh -a -d 15:14         # å…¨ç®€å†™å½¢å¼

# æˆ–ä½¿ç”¨å®Œæ•´å½¢å¼
./wake.sh -a --daemon 1530
```

### å·¥ä½œåŸç†

é˜²ç¡çœ åŠŸèƒ½ä½¿ç”¨ macOS å†…ç½®çš„ `caffeinate` å‘½ä»¤æ¥é˜»æ­¢ç³»ç»Ÿç¡çœ ï¼š

- `-d` é˜²æ­¢æ˜¾ç¤ºå™¨ç¡çœ 
- `-s` é˜²æ­¢ç³»ç»Ÿç¡çœ 
- `-i` é˜²æ­¢ç³»ç»Ÿç©ºé—²ç¡çœ 

ä½¿ç”¨ `nohup` åå°è¿è¡Œï¼Œ**å…³é—­ç»ˆç«¯ä¹Ÿä¸å½±å“**ã€‚

### âš ï¸ å…³äºåˆç›–ä¼‘çœ ï¼ˆé‡è¦ï¼‰

macOS æœ‰ä¸€ä¸ª**å®‰å…¨ä¼‘çœ ï¼ˆSafe Sleepï¼‰**æœºåˆ¶ï¼Œå½“åˆç›–æ—¶å¯èƒ½ä¼šè§¦å‘æ·±åº¦ä¼‘çœ ï¼ˆhibernateï¼‰ï¼Œè¿™ä¼šè¦†ç›– `caffeinate` çš„æ•ˆæœã€‚

**æ£€æŸ¥å½“å‰ä¼‘çœ æ¨¡å¼**ï¼š
```bash
pmset -g | grep hibernatemode
```

**ä¼‘çœ æ¨¡å¼è¯´æ˜**ï¼š

| æ¨¡å¼ | è¯´æ˜ | åˆç›–è¡Œä¸º |
|------|------|---------|
| `0` | ç¦ç”¨å®‰å…¨ä¼‘çœ  | ä¸ä¼šæ·±åº¦ä¼‘çœ  |
| `3` | å¯ç”¨å®‰å…¨ä¼‘çœ ï¼ˆé»˜è®¤ï¼‰ | åˆç›–ä¼šæ·±åº¦ä¼‘çœ  âŒ |

**è§£å†³æ–¹æ¡ˆ**ï¼š

è„šæœ¬ä¼šè‡ªåŠ¨å°è¯•ä¿®æ”¹ `hibernatemode` ä¸º 0ï¼Œä½†è¿™éœ€è¦ **sudo æƒé™**ã€‚å¦‚æœè‡ªåŠ¨ä¿®æ”¹å¤±è´¥ï¼Œä½ å¯ä»¥æ‰‹åŠ¨æ‰§è¡Œï¼š

```bash
# ä¸´æ—¶ç¦ç”¨å®‰å…¨ä¼‘çœ ï¼ˆä»…ä½¿ç”¨ç”µæºé€‚é…å™¨æ—¶ï¼‰
sudo pmset -c hibernatemode 0

# æ¢å¤é»˜è®¤è®¾ç½®
sudo pmset -c hibernatemode 3
```

**æ³¨æ„**ï¼šä¿®æ”¹ `hibernatemode` å¯èƒ½ä¼šå½±å“ç”µæ± ç»­èˆªï¼Œè¯·åœ¨ä½¿ç”¨ç”µæºé€‚é…å™¨æ—¶ä½¿ç”¨ã€‚

### ä½¿ç”¨å»ºè®®

| åœºæ™¯ | å»ºè®® |
|------|------|
| ğŸŒ™ æ™šä¸Šç¡è§‰å‰ | æ‰§è¡Œ `./wake.sh -a -d 15:14` |
| â˜€ï¸ æ—©ä¸Šèµ·åºŠå | æ‰§è¡Œ `./wake.sh -a stop` |
| ğŸ’¼ é•¿æœŸä¸ä½¿ç”¨ç¬”è®°æœ¬ | ä¿æŒé˜²ç¡çœ è¿è¡Œæˆ–å¤–æ¥æ˜¾ç¤ºå™¨ |
| ğŸ”‹ éœ€è¦çœç”µ | æ‰§è¡Œ `./wake.sh -a stop` å…è®¸ç³»ç»Ÿç¡çœ  |

### çŠ¶æ€è¾“å‡ºç¤ºä¾‹

```bash
$ ./wake.sh -a status          # æˆ– --awake status

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        é˜²ç¡çœ çŠ¶æ€
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

çŠ¶æ€: è¿è¡Œä¸­
PID:  12345

ç³»ç»Ÿå°†ä¿æŒå”¤é†’çŠ¶æ€
å³ä½¿åˆä¸Šç›–å­ä¹Ÿä¸ä¼šç¡çœ 

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

å½“å‰ç”µæºè®¾ç½®:
 sleep          0
 displaysleep   10
 disksleep      10
 hibernatemode  3

âš ï¸  æ³¨æ„: ç³»ç»Ÿå¯èƒ½åœ¨åˆç›–åä»ç„¶ç¡çœ 
     å¦‚éœ€é˜²æ­¢åˆç›–ç¡çœ ï¼Œå¯è¿è¡Œ:
     sudo pmset -c sleep 0
     (ä»…åœ¨ä½¿ç”¨ç”µæºé€‚é…å™¨æ—¶ç”Ÿæ•ˆ)
```

### å…¶ä»–è§£å†³æ–¹æ¡ˆ

å¦‚æœä½ ä¸æƒ³ä½¿ç”¨å†…ç½®é˜²ç¡çœ åŠŸèƒ½ï¼Œè¿˜æœ‰ä»¥ä¸‹é€‰æ‹©ï¼š

**æ–¹æ¡ˆ 1ï¼šç³»ç»Ÿç”µæºè®¾ç½®ï¼ˆå…¨å±€ç”Ÿæ•ˆï¼‰**

```bash
# ä»…åœ¨ä½¿ç”¨ç”µæºé€‚é…å™¨æ—¶é˜²æ­¢ç¡çœ 
pmset -c sleep 0
pmset -c displaysleep 0
```

**æ–¹æ¡ˆ 2ï¼šå¤–æ¥æ˜¾ç¤ºå™¨**

è¿æ¥å¤–æ¥æ˜¾ç¤ºå™¨æ—¶ï¼Œå¤§å¤šæ•° Mac ä¸ä¼šç¡çœ ï¼ˆåˆç›–æ¨¡å¼ï¼‰ã€‚

**æ–¹æ¡ˆ 3ï¼šä¿æŒç›–å­å¼€å¯**

ç®€å•ç›´æ¥ï¼Œä½†ä¸å¤Ÿä¼˜é›…ã€‚

## âš™ï¸ é…ç½®æ–‡ä»¶

### é…ç½®æ–‡ä»¶è¯´æ˜

é¡¹ç›®åŒ…å«ä¸¤ä¸ªé…ç½®ç›¸å…³æ–‡ä»¶ï¼š

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `config.jsonc.example` | é…ç½®æ–‡ä»¶**èŒƒä¾‹**ï¼ˆåŒ…å«æ‰€æœ‰é…ç½®é¡¹å’Œæ³¨é‡Šï¼‰ |
| `config.jsonc` | å®é™…ä½¿ç”¨çš„é…ç½®æ–‡ä»¶ï¼ˆé¦–æ¬¡è¿è¡Œ `--setup` åè‡ªåŠ¨ç”Ÿæˆï¼‰ |

### ä½¿ç”¨ç¤ºä¾‹æ–‡ä»¶

å¦‚æœä½ æƒ³è¦æ‰‹åŠ¨åˆ›å»ºæˆ–å‚è€ƒé…ç½®æ–‡ä»¶ï¼š

```bash
# 1. å¤åˆ¶ç¤ºä¾‹æ–‡ä»¶ä¸ºå®é™…é…ç½®æ–‡ä»¶
cp config.jsonc.example config.jsonc

# 2. ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„ API Key
nano config.jsonc  # æˆ–ä½¿ç”¨ä½ å–œæ¬¢çš„ç¼–è¾‘å™¨

# 3. ä¿å­˜åæµ‹è¯•é…ç½®æ˜¯å¦æ­£ç¡®
./wake.sh -t                # æˆ– --test
```

### é…ç½®æ–‡ä»¶ç»“æ„

é…ç½®æ–‡ä»¶ä½äºé¡¹ç›®æ ¹ç›®å½•çš„ `config.jsonc`ï¼š

```json
{
  "api": {
    "key": "your-api-key-here",
    "model": "glm-4.7"
  },
  "provider": {
    "name": "æ™ºè°± AI",
    "baseUrl": "https://open.bigmodel.cn/api/anthropic",
    "endpoint": "/v1/messages",
    "authHeader": "x-api-key"
  },
  "request": {
    "prompts": [
      "hi",
      "ä½ å¥½",
      "hello",
      "æ—©ä¸Šå¥½",
      "åœ¨å—",
      "æµ‹è¯•è¿æ¥",
      "ping",
      "1+1ç­‰äºå‡ ",
      "ç°åœ¨å‡ ç‚¹äº†",
      "å¤©æ°”æ€ä¹ˆæ ·"
    ]
  }
}
```

### é…ç½®è¯´æ˜

| å­—æ®µ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| `api.key` | æ™ºè°± AI API Key | `your-api-key-here`ï¼ˆè¯·æ›¿æ¢ä¸ºä½ çš„çœŸå® API Keyï¼‰ |
| `api.model` | ä½¿ç”¨çš„æ¨¡å‹ | `glm-4.7`, `glm-4-flash`, `glm-4-plus` |
| `request.prompts` | å”¤é†’æ¶ˆæ¯åˆ—è¡¨ï¼ˆå¯é€‰ï¼‰ | è§ä¸Šæ–¹ç¤ºä¾‹ |

> **ğŸ’¡ æ—¶é—´é…ç½®æç¤º**ï¼šè°ƒåº¦æ—¶é—´é€šè¿‡å‘½ä»¤è¡Œå‚æ•°è®¾ç½®ï¼Œå¦‚ `./wake.sh -d 15:00` æˆ– `./wake.sh -s` å¯åŠ¨é…ç½®å‘å¯¼

### å…³äº request.prompts é…ç½®

**ä¸ºä»€ä¹ˆè¦é…ç½®å¤šä¸ªæ¶ˆæ¯ï¼Ÿ**

å½“é…é¢ç”¨å®Œåï¼Œè„šæœ¬ä¼šæŒç»­å‘é€è¯·æ±‚ã€‚å¦‚æœæ¯æ¬¡éƒ½å‘é€ç›¸åŒçš„æ¶ˆæ¯ï¼ˆå¦‚ `"hi"`ï¼‰ï¼Œå¯èƒ½ä¼šè¢«ç³»ç»Ÿè¯†åˆ«ä¸ºå¼‚å¸¸è¡Œä¸ºï¼Œå¯¼è‡´è¿”å› 429 é”™è¯¯ã€‚

**ä½¿ç”¨æ–¹å¼ï¼š**

1. **ä¸é…ç½®ï¼ˆæ¨èæ–°æ‰‹ï¼‰**ï¼šä½¿ç”¨é»˜è®¤æ¶ˆæ¯ `"hi"`ï¼Œé€‚åˆæ­£å¸¸ä½¿ç”¨åœºæ™¯
2. **é…ç½®å¤šä¸ªæ¶ˆæ¯**ï¼šåœ¨ `request.prompts` æ•°ç»„ä¸­æ·»åŠ å¤šä¸ªæ¶ˆæ¯ï¼Œæ¯æ¬¡è¯·æ±‚éšæœºé€‰æ‹©ä¸€ä¸ª

**ç¤ºä¾‹é…ç½®ï¼š**

```json
"request": {
  "prompts": [
    "hi",
    "ä½ å¥½",
    "hello",
    "æ—©ä¸Šå¥½",
    "åœ¨å—",
    "æµ‹è¯•è¿æ¥",
    "ping",
    "1+1ç­‰äºå‡ ",
    "ç°åœ¨å‡ ç‚¹äº†",
    "å¤©æ°”æ€ä¹ˆæ ·"
  ]
}
```

æ¯æ¬¡æ‰§è¡Œè„šæœ¬æ—¶ï¼Œä¼šä»ä¸Šè¿°åˆ—è¡¨ä¸­éšæœºé€‰æ‹©ä¸€ä¸ªæ¶ˆæ¯å‘é€ã€‚

**å‘åå…¼å®¹ï¼š**

- å¦‚æœä¸é…ç½® `request.prompts` å­—æ®µï¼Œè„šæœ¬ä¼šä½¿ç”¨é»˜è®¤æ¶ˆæ¯ `"hi"`
- ç°æœ‰é…ç½®æ–‡ä»¶æ— éœ€ä¿®æ”¹å³å¯ç»§ç»­ä½¿ç”¨

## ğŸ”§ å‘½ä»¤è¡Œé€‰é¡¹

```bash
./wake.sh [é€‰é¡¹]

é€‰é¡¹:
  -h, --help              æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
  -t, --test              æµ‹è¯•æ¨¡å¼ï¼ˆæ˜¾ç¤ºè¯¦ç»†è¾“å‡ºï¼‰
  -v, --version           æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯
  -a, --awake [CMD]       é˜²ç¡çœ æ§åˆ¶ï¼ˆä»… macOSï¼‰
                          CMD: start|stop|status|restart
                          å¯ä¸å…¶ä»–é€‰é¡¹ç»„åˆä½¿ç”¨
  -T, --timer TIME        åœ¨æŒ‡å®šæ—¶é—´æ‰§è¡Œï¼ˆæ ¼å¼ï¼šHH:MM:SSã€HHMMSSã€HH:MM æˆ– HHMMï¼‰
  -d, --daemon TIME       åå°å®šæ—¶æ¨¡å¼ï¼ˆæ ¼å¼ï¼šHH:MM:SSã€HHMMSSã€HH:MM æˆ– HHMMï¼‰
  -s, --setup             é‡æ–°é…ç½®è°ƒåº¦
  -u, --unschedule        å–æ¶ˆè°ƒåº¦ä»»åŠ¡
```

### ä½¿ç”¨ç¤ºä¾‹

```bash
# æŸ¥çœ‹å¸®åŠ©
./wake.sh -h                # æˆ– --help

# æµ‹è¯•é…ç½®
./wake.sh -t                # æˆ– --test

# åœ¨æŒ‡å®šæ—¶é—´æ‰§è¡Œå”¤é†’ï¼ˆå‰å°æ¨¡å¼ï¼‰
./wake.sh -T 15:14          # ç®€å†™å½¢å¼

# åå°å®šæ—¶æ‰§è¡Œï¼ˆæ¨èï¼‰
./wake.sh -d 1514           # ç®€å†™å½¢å¼

# é‡æ–°é…ç½®
./wake.sh -s                # æˆ– --setup

# å–æ¶ˆè°ƒåº¦ä»»åŠ¡
./wake.sh -u                # æˆ– --unschedule
```

## â° å†…ç½®å®šæ—¶å™¨åŠŸèƒ½

### ä¸ºä»€ä¹ˆéœ€è¦å®šæ—¶å™¨ï¼Ÿ

å½“ä½ çŸ¥é“é…é¢é‡ç½®æ—¶é—´ï¼ˆå¦‚ 15:14ï¼‰æ—¶ï¼Œå¯ä»¥ä½¿ç”¨å®šæ—¶å™¨åŠŸèƒ½ç¡®ä¿åœ¨é‚£ä¸ªæ—¶é—´è‡ªåŠ¨å”¤é†’ï¼Œæ— éœ€æ‰‹åŠ¨æ“ä½œã€‚

### ä½¿ç”¨æ–¹å¼

**å‰å°æ¨¡å¼ï¼š**
```bash
./wake.sh -T 15:14          # ç®€å†™å½¢å¼
# æˆ–
./wake.sh --timer 15:14
```
- ä¼šæ˜¾ç¤ºå€’è®¡æ—¶
- éœ€è¦ä¿æŒç»ˆç«¯è¿è¡Œ
- æŒ‰ Ctrl+C å¯å–æ¶ˆ

**åå°æ¨¡å¼ï¼ˆæ¨èï¼‰ï¼š**
```bash
./wake.sh -d 15:14           # ç®€å†™å½¢å¼
# æˆ–
./wake.sh --daemon 15:14
```
- åå°è¿è¡Œï¼Œå…³é—­ç»ˆç«¯ä¸å½±å“
- æŸ¥çœ‹æ—¥å¿—äº†è§£è¿›åº¦ï¼š`tail -f wake.log`

### æ—¶é—´æ ¼å¼

æ”¯æŒå››ç§æ ¼å¼ï¼š
- `HH:MM:SS`ï¼šå¦‚ `15:14:30`ï¼ˆç²¾ç¡®åˆ°ç§’ï¼‰
- `HHMMSS`ï¼šå¦‚ `151430`ï¼ˆç²¾ç¡®åˆ°ç§’ï¼Œâœ… å·²æ”¯æŒï¼‰
- `HH:MM`ï¼šå¦‚ `15:14`
- `HHMM`ï¼šå¦‚ `1514`ã€`0600`ï¼ˆâœ… æ”¯æŒç®€æ˜“æ ¼å¼ï¼‰

> **âš ï¸ æ³¨æ„**ï¼šå°æ—¶å¿…é¡»æ˜¯ä¸¤ä½æ•°ï¼ˆå¦‚ `06:00` æˆ– `0600`ï¼‰ï¼Œå•ä½æ•°ï¼ˆå¦‚ `6:00`ï¼‰ä¸æ”¯æŒ

### å·¥ä½œåŸç†

```
å½“å‰æ—¶é—´ 12:00ï¼Œè®¾ç½® --timer 15:14

1. è®¡ç®—ç­‰å¾…æ—¶é—´ï¼š3å°æ—¶14åˆ†
2. æ˜¾ç¤ºå€’è®¡æ—¶ï¼ˆå‰å°ï¼‰æˆ–åå°è¿è¡Œï¼ˆåå°ï¼‰
3. æ—¶é—´åˆ°åè‡ªåŠ¨æ‰§è¡Œå”¤é†’
```

å¦‚æœç²¾ç¡®åˆ°ç§’ï¼š

```
å½“å‰æ—¶é—´ 12:00:45ï¼Œè®¾ç½® --timer 15:14:30

1. è®¡ç®—ç­‰å¾…æ—¶é—´ï¼š3å°æ—¶13åˆ†45ç§’ï¼ˆç²¾ç¡®è®¡ç®—ï¼ï¼‰
2. æ˜¾ç¤ºå€’è®¡æ—¶ï¼ˆå‰å°ï¼‰æˆ–åå°è¿è¡Œï¼ˆåå°ï¼‰
3. æ—¶é—´åˆ°åè‡ªåŠ¨æ‰§è¡Œå”¤é†’
```

### ä½¿ç”¨åœºæ™¯

| åœºæ™¯ | æ¨èå‘½ä»¤ | è¯´æ˜ |
|------|---------|------|
| çŸ¥é“é‡ç½®æ—¶é—´ï¼ˆç²¾ç¡®åˆ°ç§’ï¼‰ | `./wake.sh -d 15:14:30` | åå°è¿è¡Œï¼Œä¸å ç”¨ç»ˆç«¯ |
| çŸ¥é“é‡ç½®æ—¶é—´ï¼ˆåˆ°åˆ†é’Ÿå³å¯ï¼‰ | `./wake.sh -d 1514` | åå°è¿è¡Œï¼Œä¸å ç”¨ç»ˆç«¯ |
| æµ‹è¯•åŠŸèƒ½ | `./wake.sh -t` | éªŒè¯é…ç½®æ˜¯å¦æ­£ç¡® |
| ç«‹å³å”¤é†’ | `./wake.sh` | ç›´æ¥æ‰§è¡Œå”¤é†’ |
| å®šæ—¶ä»»åŠ¡ | `./wake.sh -s` | ä½¿ç”¨ç³»ç»Ÿè°ƒåº¦ |

### å®šæ—¶å™¨ vs ç³»ç»Ÿè°ƒåº¦

| ç‰¹æ€§ | å®šæ—¶å™¨ (`--daemon`) | ç³»ç»Ÿè°ƒåº¦ (`--setup`) |
|------|-------------------|---------------------|
| **è®¾ç½®å¤æ‚åº¦** | ç®€å•ï¼ˆä¸€è¡Œå‘½ä»¤ï¼‰ | éœ€è¦é…ç½®å‘å¯¼ |
| **æŒä¹…æ€§** | ä¸€æ¬¡æ€§æ‰§è¡Œ | æŒç»­è¿è¡Œ |
| **ç³»ç»Ÿç¡çœ ** | å¯ç”¨ `-a` å‚æ•°åŒæ—¶å¯åŠ¨é˜²ç¡çœ  | éœ€è¦é…åˆ `--awake` |
| **ä½¿ç”¨åœºæ™¯** | å•æ¬¡å®šæ—¶ä»»åŠ¡ | é•¿æœŸè‡ªåŠ¨åŒ– |

**ç»„åˆä½¿ç”¨å»ºè®®ï¼š**
```bash
# æ™šä¸Šç¡è§‰å‰ï¼ˆä¸€æ¡å‘½ä»¤å®Œæˆï¼‰- å…¨ç®€å†™å½¢å¼
./wake.sh -a -d 15:14:30       # å¯åŠ¨é˜²ç¡çœ  + è®¾ç½®æ˜å¤©15:14:30çš„å”¤é†’ä»»åŠ¡

# æ—©ä¸Šèµ·åºŠå
./wake.sh --awake stop          # åœæ­¢é˜²ç¡çœ 
```

## â° è‡ªåŠ¨é‡è¯•åŠŸèƒ½

å½“é…é¢ç”¨å®Œæ—¶ï¼Œè„šæœ¬ä¼šè‡ªåŠ¨æ£€æµ‹å¹¶å®‰æ’åœ¨é‡ç½®æ—¶é—´åé‡è¯•ï¼Œæ— éœ€ä»»ä½•æ‰‹åŠ¨æ“ä½œã€‚

### å·¥ä½œåŸç†

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ‰§è¡Œ wake.sh  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚         â”‚
    â–¼         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é…é¢è¶³å¤Ÿ â”‚ â”‚  é…é¢ä¸è¶³(1308)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ è§£æé‡ç½®æ—¶é—´     â”‚
          â”‚ 2025-01-15 06:00 â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ åˆ›å»ºåå°é‡è¯•     â”‚
          â”‚ ç­‰å¾…åˆ°é‡ç½®æ—¶é—´   â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ è‡ªåŠ¨å”¤é†’ âœ“      â”‚
          â”‚ è‡ªåŠ¨æ¸…ç†ä¸´æ—¶æ–‡ä»¶ â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä½¿ç”¨åœºæ™¯

#### åœºæ™¯ 1ï¼šæ‰‹åŠ¨è§¦å‘é‡è¯•

```bash
# ä½ å‘ç°é…é¢ç”¨å®Œäº†ï¼Œè¿è¡Œä¸€æ¬¡è„šæœ¬
./wake.sh

# è¾“å‡ºç¤ºä¾‹ï¼š
# âš  é…é¢ä¸è¶³ï¼Œå°†åœ¨ 2025-01-15 06:00:00 é‡ç½®
# å·²å®‰æ’è‡ªåŠ¨é‡è¯•

# ç„¶åä½ å°±å¯ä»¥å…³é—­ç»ˆç«¯äº†ï¼Œè„šæœ¬ä¼šè‡ªåŠ¨åœ¨é‡ç½®æ—¶é—´å”¤é†’
```

#### åœºæ™¯ 2ï¼šå®šæ—¶ä»»åŠ¡é‡åˆ°é…é¢ä¸è¶³

å®šæ—¶ä»»åŠ¡ï¼ˆå¦‚ 11:00ï¼‰è‡ªåŠ¨è¿è¡Œæ—¶ï¼Œå¦‚æœé…é¢ç”¨å®Œäº†ï¼š
- è‡ªåŠ¨æ£€æµ‹åˆ° 1308 é”™è¯¯ç 
- è‡ªåŠ¨è§£æé‡ç½®æ—¶é—´
- è‡ªåŠ¨åˆ›å»ºåå°é‡è¯•è„šæœ¬
- ä½ ä¸éœ€è¦åšä»»ä½•äº‹æƒ…

### ç‰¹æ€§è¯´æ˜

| ç‰¹æ€§ | è¯´æ˜ |
|------|------|
| ğŸ” **è‡ªåŠ¨æ£€æµ‹** | æ£€æµ‹æ™ºè°± AI çš„ 1308 é”™è¯¯ç  |
| ğŸ“… **è‡ªåŠ¨è§£æ** | ä»é”™è¯¯å“åº”ä¸­æå–é‡ç½®æ—¶é—´ |
| â° **è‡ªåŠ¨è®¡ç®—** | è®¡ç®—éœ€è¦ç­‰å¾…çš„ç§’æ•° |
| ğŸ”„ **è‡ªåŠ¨é‡è¯•** | åˆ›å»ºåå°è„šæœ¬ï¼Œåœ¨é‡ç½®æ—¶é—´åæ‰§è¡Œ |
| ğŸ§¹ **è‡ªåŠ¨æ¸…ç†** | é‡è¯•å®Œæˆåè‡ªåŠ¨åˆ é™¤ä¸´æ—¶æ–‡ä»¶ |
| ğŸ’ª **æŒä¹…åŒ–** | ä½¿ç”¨ `nohup` åå°è¿è¡Œï¼Œå…³é—­ç»ˆç«¯ä¹Ÿä¸å½±å“ |

### æŸ¥çœ‹é‡è¯•çŠ¶æ€

```bash
# æŸ¥çœ‹æ—¥å¿—ç¡®è®¤é‡è¯•å·²å®‰æ’
tail -f wake.log

# æŸ¥çœ‹æ˜¯å¦æœ‰é‡è¯•è„šæœ¬åœ¨è¿è¡Œ
ls -la .retry_wake.sh

# æŸ¥çœ‹åå°è¿›ç¨‹
ps aux | grep "wake.sh"
```

## ğŸ“… è°ƒåº¦ä»»åŠ¡

é…ç½®å‘å¯¼ä¼šè‡ªåŠ¨è®¾ç½®ç³»ç»Ÿè°ƒåº¦ä»»åŠ¡ï¼š

### macOS (launchd)

ä»»åŠ¡æ–‡ä»¶ä½äº `~/Library/LaunchAgents/com.GLM_quota_kicker.plist`

```bash
# æŸ¥çœ‹ä»»åŠ¡çŠ¶æ€
launchctl list | grep GLM_quota_kicker

# æ‰‹åŠ¨å¯åŠ¨
launchctl start com.GLM_quota_kicker

# åœæ­¢ä»»åŠ¡
launchctl unload ~/Library/LaunchAgents/com.GLM_quota_kicker.plist
```

### Linux (cron)

```bash
# æŸ¥çœ‹å½“å‰ crontab
crontab -l | grep GLM_quota_kicker

# ç¼–è¾‘ crontab
crontab -e
```

## ğŸ’¤ ç³»ç»Ÿç¡çœ å»ºè®®

ä¸ºç¡®ä¿å®šæ—¶ä»»åŠ¡èƒ½å¤Ÿæ­£å¸¸è¿è¡Œï¼Œéœ€è¦æ³¨æ„ç³»ç»Ÿçš„ç¡çœ å’Œä¼‘çœ è®¾ç½®ã€‚

> **æç¤º**ï¼šmacOS ç”¨æˆ·è¯·æŸ¥çœ‹ä¸Šæ–¹[é˜²ç¡çœ åŠŸèƒ½è¯´æ˜](#-é˜²æ­¢ç³»ç»Ÿç¡çœ é‡è¦)ã€‚

### è¿è¡ŒçŠ¶æ€è¯´æ˜

| ç³»ç»ŸçŠ¶æ€ | å®šæ—¶ä»»åŠ¡æ˜¯å¦è¿è¡Œ | è¯´æ˜ |
|---------|-----------------|------|
| âœ… å±å¹•å…³é—­ | âœ… æ­£å¸¸è¿è¡Œ | launchd/cron åœ¨åå°è¿è¡Œ |
| âœ… SSH æ–­å¼€ | âœ… æ­£å¸¸è¿è¡Œ | ä½¿ç”¨ nohup æŒä¹…åŒ– |
| âœ… ç»ˆç«¯å…³é—­ | âœ… æ­£å¸¸è¿è¡Œ | åå°è¿›ç¨‹ä¸å—å½±å“ |
| âŒ ç”µè„‘ç¡çœ  | âŒ ä¸è¿è¡Œ | éœ€è¦ä¿æŒå”¤é†’çŠ¶æ€ |
| âŒ åˆä¸Šç¬”è®°æœ¬ç›–å­ | âŒ ä¸è¿è¡Œ | å¤§å¤šæ•° Mac ä¼šç¡çœ  |

### Linux è®¾ç½®å»ºè®®

```bash
# æŸ¥çœ‹å½“å‰ç”µæºç®¡ç†è®¾ç½®
systemctl status sleep-target

# ç¦ç”¨è‡ªåŠ¨ç¡çœ 
systemctl mask sleep.target suspend.target hibernate.target hybrid-sleep.target

# æˆ–è€…ä½¿ç”¨ xset ç¦ç”¨å±å¹•ä¿æŠ¤ç¨‹åº
xset s off
xset -dpms
xset s noblank
```

### æ£€æŸ¥ç³»ç»ŸçŠ¶æ€

```bash
# macOS - æŸ¥çœ‹ç”µæºè®¾ç½®
pmset -g

# macOS - æŸ¥çœ‹å®šæ—¶ä»»åŠ¡çŠ¶æ€
launchctl list | grep GLM_quota_kicker

# Linux - æŸ¥çœ‹å®šæ—¶ä»»åŠ¡
crontab -l | grep GLM_quota_kicker

# æŸ¥çœ‹æœ€è¿‘è¿è¡Œæ—¥å¿—
tail -20 wake.log
```

### å¸¸è§é—®é¢˜æ’æŸ¥

**é—®é¢˜**ï¼šå®šæ—¶ä»»åŠ¡æ²¡æœ‰æ‰§è¡Œ

**å¯èƒ½åŸå› **ï¼š
1. ç”µè„‘åœ¨æ‰§è¡Œæ—¶é—´å¤„äºç¡çœ çŠ¶æ€
2. ç³»ç»Ÿæ—¶é—´ä¸æ­£ç¡®
3. å®šæ—¶ä»»åŠ¡è¢«å¸è½½

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# 1. æ£€æŸ¥ç³»ç»Ÿæ—¶é—´
date

# 2. æ‰‹åŠ¨æµ‹è¯•è„šæœ¬
./wake.sh -t                # æˆ– --test

# 3. é‡æ–°é…ç½®è°ƒåº¦
./wake.sh -u                # æˆ– --unschedule
./wake.sh -s                # æˆ– --setup

# 4. æŸ¥çœ‹æ—¥å¿—æ‰¾å‡ºé—®é¢˜
cat wake.log
```

## ğŸ“ æ—¥å¿—

è¿è¡Œæ—¥å¿—ä¿å­˜åœ¨ `wake.log`ï¼š

```bash
# æŸ¥çœ‹æœ€è¿‘æ—¥å¿—
tail -f wake.log

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
grep ERROR wake.log
```

## â“ å¸¸è§é—®é¢˜

### Q: ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªå·¥å…·ï¼Ÿ

A: æ™ºè°± AI çš„é…é¢æ¯ 5 å°æ—¶é‡ç½®ï¼Œä½†å¦‚æœä¸ä½¿ç”¨ï¼Œæ–°é…é¢ä¼šåœ¨ä¸‹ä¸€ä¸ªå‘¨æœŸä½œåºŸã€‚æœ¬å·¥å…·ç¡®ä¿æ¯æ¬¡é‡ç½®åç«‹å³ä½¿ç”¨é…é¢ã€‚

### Q: ä¼šæ¶ˆè€—å¾ˆå¤šé…é¢å—ï¼Ÿ

A: ä¸ä¼šã€‚æ¯æ¬¡å”¤é†’åªå‘é€ä¸€ä¸ªæç®€è¯·æ±‚ï¼ˆçº¦ 6 tokensï¼‰ï¼Œæ¯æœˆæ¶ˆè€—ä¸è¶…è¿‡ 300 tokensã€‚

### Q: å¦‚ä½•æ›´æ”¹å”¤é†’æ—¶é—´ï¼Ÿ

A: é‡æ–°è¿è¡Œé…ç½®å‘å¯¼ï¼š
```bash
./wake.sh -s                # ç®€å†™å½¢å¼
```

### Q: åˆä¸Šç›–å­åå®šæ—¶ä»»åŠ¡ä¸æ‰§è¡Œæ€ä¹ˆåŠï¼Ÿ

A: è¿™æ˜¯å› ä¸º Mac åˆç›–åä¼šè¿›å…¥ç¡çœ çŠ¶æ€ã€‚

**æ¨èè§£å†³æ–¹æ¡ˆ**ï¼šä½¿ç”¨å†…ç½®é˜²ç¡çœ åŠŸèƒ½
```bash
./wake.sh -a                # æ™šä¸Šç¡è§‰å‰å¯åŠ¨
./wake.sh -a stop          # ç¬¬äºŒå¤©æ—©ä¸Šåœæ­¢
```

è¯¦è§[é˜²ç¡çœ åŠŸèƒ½è¯´æ˜](#-é˜²æ­¢ç³»ç»Ÿç¡çœ é‡è¦)ã€‚

### Q: API Key å­˜å‚¨å®‰å…¨å—ï¼Ÿ

A: é…ç½®æ–‡ä»¶å­˜å‚¨åœ¨æœ¬åœ°ï¼Œä¸ä¼šä¸Šä¼ ã€‚å»ºè®®å°† `config.jsonc` æ·»åŠ åˆ° `.gitignore`ã€‚

### Q: æ”¯æŒ Windows å—ï¼Ÿ

A: ç›®å‰ä»…æ”¯æŒ macOS å’Œ Linuxã€‚Windows ç”¨æˆ·å¯ä½¿ç”¨ WSL æˆ– Git Bash è¿è¡Œã€‚

### Q: å¦‚ä½•å®Œå…¨å¸è½½ï¼Ÿ

A:
```bash
# 1. å–æ¶ˆè°ƒåº¦
./wake.sh -u                # ç®€å†™å½¢å¼

# 2. åˆ é™¤é¡¹ç›®ç›®å½•
cd ..
rm -rf glm_quota_kicker
```

## ğŸ› æ•…éšœæ’æŸ¥

### é—®é¢˜ï¼šjq æœªå®‰è£…

**é”™è¯¯ä¿¡æ¯**ï¼š`é”™è¯¯: éœ€è¦å®‰è£… jq å·¥å…·`

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# macOS
brew install jq

# Linux
sudo apt install jq  # Ubuntu/Debian
sudo yum install jq  # CentOS/RHEL
```

### é—®é¢˜ï¼šæƒé™ä¸è¶³

**é”™è¯¯ä¿¡æ¯**ï¼š`Permission denied`

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
chmod +x wake.sh
```

### é—®é¢˜ï¼šå”¤é†’å¤±è´¥

**é”™è¯¯ä¿¡æ¯**ï¼š`âœ— å”¤é†’å¤±è´¥ - HTTP 401`

**è§£å†³æ–¹æ¡ˆ**ï¼š
- æ£€æŸ¥ API Key æ˜¯å¦æ­£ç¡®
- ç¡®è®¤ API Key æœªè¿‡æœŸ
- ä½¿ç”¨ `./wake.sh -t` æµ‹è¯•é…ç½®

### é—®é¢˜ï¼šè°ƒåº¦ä»»åŠ¡æœªæ‰§è¡Œ

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æ£€æŸ¥è°ƒåº¦çŠ¶æ€
# macOS
launchctl list | grep GLM_quota_kicker

# Linux
crontab -l | grep GLM_quota_kicker

# æŸ¥çœ‹æ—¥å¿—
cat wake.log
```

## ğŸ” é«˜çº§ç”¨æ³•

### è‡ªå®šä¹‰å”¤é†’å†…å®¹

è„šæœ¬æ”¯æŒè‡ªå®šä¹‰å”¤é†’æ¶ˆæ¯åˆ—è¡¨ï¼Œæ¯æ¬¡æ‰§è¡Œæ—¶ä¼šéšæœºé€‰æ‹©ä¸€æ¡å‘é€ï¼Œé¿å…è¢«è¯†åˆ«ä¸ºå¼‚å¸¸è¡Œä¸ºã€‚

ç¼–è¾‘ `config.jsonc`ï¼Œæ·»åŠ æˆ–ä¿®æ”¹ `request.prompts` å­—æ®µï¼š

```json
{
  "request": {
    "prompts": [
      "hi",
      "ä½ å¥½",
      "hello",
      "1+1ç­‰äºå‡ ",
      "ç°åœ¨å‡ ç‚¹äº†"
    ]
  }
}
```

**è¯´æ˜**ï¼š
- `prompts` æ•°ç»„ä¸­çš„æ¯æ¡æ¶ˆæ¯éƒ½ä¼šè¢«éšæœºé€‰æ‹©
- å¯ä»¥æ·»åŠ ä»»æ„æ•°é‡çš„æ¶ˆæ¯
- å¦‚æœä¸é…ç½®æ­¤å­—æ®µï¼Œå°†ä½¿ç”¨é»˜è®¤æ¶ˆæ¯ `"hi"`

### æ‰‹åŠ¨è§¦å‘å•æ¬¡å”¤é†’

```bash
# ä¸ç­‰å¾…è°ƒåº¦ï¼Œç«‹å³æ‰§è¡Œ
./wake.sh
```

### ä»…æµ‹è¯•é…ç½®ä¸å‘é€è¯·æ±‚

```bash
# ä½¿ç”¨æµ‹è¯•æ¨¡å¼æŸ¥çœ‹é…ç½®è¯¦æƒ…
./wake.sh -t                # æˆ– --test
```

## ğŸ“¦ é¡¹ç›®ç»“æ„

```
glm_quota_kicker/
â”œâ”€â”€ wake.sh                    # ä¸»è„šæœ¬ï¼ˆåŒ…å«æ‰€æœ‰åŠŸèƒ½ï¼ŒåŒ…æ‹¬é˜²ç¡çœ ï¼‰
â”œâ”€â”€ config.jsonc.example       # é…ç½®æ–‡ä»¶ç¤ºä¾‹
â”œâ”€â”€ config.jsonc               # å®é™…é…ç½®æ–‡ä»¶ï¼ˆé¦–æ¬¡è¿è¡Œåç”Ÿæˆï¼‰
â”œâ”€â”€ wake.log                   # è¿è¡Œæ—¥å¿—ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
â”œâ”€â”€ .schedule.json             # è°ƒåº¦æ—¶é—´ç¼“å­˜ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
â”œâ”€â”€ .caffeinate.pid            # é˜²ç¡çœ è¿›ç¨‹ PIDï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼Œä»… macOSï¼‰
â”œâ”€â”€ .timer_wake_*.sh           # å®šæ—¶å™¨ä¸´æ—¶è„šæœ¬ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
â”œâ”€â”€ .retry_wake.sh             # é…é¢é‡ç½®åè‡ªåŠ¨é‡è¯•è„šæœ¬ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
â”œâ”€â”€ .gitignore                 # Git å¿½ç•¥é…ç½®
â”œâ”€â”€ LICENSE                    # MIT è®¸å¯è¯
â””â”€â”€ README.md                  # æœ¬æ–‡æ¡£
```

> **æ³¨æ„**ï¼šé¡¹ç›®å·²é…ç½® `.gitignore` æ–‡ä»¶ï¼Œç¡®ä¿ `config.jsonc`ï¼ˆåŒ…å« API Keyï¼‰ã€æ—¥å¿—æ–‡ä»¶å’Œä¸´æ—¶è„šæœ¬ä¸ä¼šè¢«æäº¤åˆ° Git ä»“åº“ã€‚

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ è®¸å¯è¯

MIT License - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

## ğŸ”— ç›¸å…³é“¾æ¥

- [æ™ºè°± AI å¼€æ”¾å¹³å°](https://open.bigmodel.cn/)
- [æ™ºè°± AI API æ–‡æ¡£](https://open.bigmodel.cn/dev/api)
- [é—®é¢˜åé¦ˆ](https://github.com/ssdiwu/GLM_quota_kicker/issues)

## â­ Star History

å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ª Star â­

---

**Made with â¤ï¸ by [ssdiwu](https://github.com/ssdiwu)**

## ğŸ“Œ ç‰ˆæœ¬ä¿¡æ¯

**å½“å‰ç‰ˆæœ¬**: v0.5.0

æŸ¥çœ‹å®Œæ•´ç‰ˆæœ¬å†å²å’Œæ›´æ–°å†…å®¹ï¼Œè¯·è®¿é—®: [Releases](https://github.com/ssdiwu/GLM_quota_kicker/releases)
